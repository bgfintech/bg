/**
 * Created by admin on 2015/12/16.
 */

// <input type="text" reg="正则表达式" class="validation" />

$(function(){

    //注册
    $(".validation").blur(function(){
        $(this).parents(".form-group").find(".help-block").fadeOut();
        var state = $(this).attr("state");
        var info = "";

        for( i = 0; i < arr.length; i ++ ){

            if(state == arr[i].name ){
                info = arr[i].info;
                reg = arr[i].reg;
            }

        }

        var re = new RegExp(reg);
        var str = $.trim($(this).val());

        $(this).parent().find(".-w-error").remove();
        $(this).after("<i class='-w-error' style='display: none'></i>");
        if(re != "") {
            if (str == "") {
                $(this).parent().children(".-w-error").html("不能为空").show();
            } else if (re.test(str)) {
                $(this).parent().children(".-w-error").html("");
            } else if (!re.test(str)) {
                $(this).parent().children(".-w-error").html(info).show();
                $(this).val("");
            }
        }


    });

})


$(".validation").focus(function(){

    $(this).parents(".form-group").find(".help-block").fadeIn();

})





//提交验证非空方法
var _submit = function(tag){
    var state = true;
    $(tag+' '+"input").each(function(){
        $(this).parent().children(".-w-error").remove();
        if($.trim($(this).val()) == ""){
            $(this).after("<i class='-w-error' style='display: none'></i>");
            $(this).parent().children(".-w-error").html("不能为空").show();
            state = false;
            return false;
        }
    })

    return state;
};



//定义验证
var arr=[{'name':'phone','reg':'^0{0,1}(13[0-9]|15[7-9]|153|156|18[2-9])[0-9]{8}$','info':"手机号输入有误，请重新输入！"},

    {'name':'password','reg':'(?!^\\d+$)(?!^[a-zA-Z]+$)(?!^[_#@]+$).{8,}','info':"密码有误！"}

];